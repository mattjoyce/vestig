# Test config - uses Haiku for cost efficiency
storage:
  db_path: "test_vestig.db"  # Fresh database

embedding:
  model: "BAAI/bge-m3"
  dimension: 1024
  normalize: true

hygiene:
  min_chars: 12
  max_chars: 4000
  normalize_whitespace: true
  reject_exact_duplicates: true
  near_duplicate:
    enabled: true
    threshold: 0.92
    skip_manual_source: true

ingestion:
  model: claude-haiku-4.5
  chunk_size: 20000
  chunk_overlap: 500
  min_confidence: 0.6
  format: auto
  force_entities: []
  claude_session:
    include_roles:
      - user
      - assistant
    include_message_types:
      - text
    drop_thinking: true
    drop_tool_use: true

m3:
  temporal:
    enabled: true
  events:
    enabled: true
  tracerank:
    enabled: true
    tau_days: 21.0
    cooldown_hours: 24.0
    burst_discount: 0.2
    k: 0.35

m4:
  entity_types:
    allowed_types:
      - PERSON
      - ORG
      - SYSTEM
      - PROJECT
      - PLACE

  entity_extraction:
    enabled: true
    mode: llm
    llm:
      model: claude-haiku-4.5            # Fast & cheap for testing
      max_entities_per_memory: 10
      min_confidence: 0.75
      store_low_confidence: false
      max_evidence_length: 200
    heuristics:
      strip_titles: true
      normalize_org_suffixes: true
      reject_garbage: true

  edge_creation:
    mentions:
      enabled: true
      confidence_gated: true
    related:
      enabled: true
      similarity_threshold: 0.6
      max_edges_per_memory: 10
